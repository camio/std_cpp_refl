\section{Examples of usage}

\subsection{Class data members (1)}

\begin{minted}[tabsize=4]{cpp}
#include <reflexpr>
#include <iostream>

struct foo
{
private:
	int _i, _j;
public:
	static constexpr const bool b = true;
	float x, y, z;
private:
	static double d;
};

int main(void)
{
	using namespace std;

	typedef reflexpr(foo) meta_foo;

	// (public) data members
	typedef meta::get_data_members_t<meta_foo> meta_data_mems;

	static_assert(is_metaobject_v<meta_data_mems>, "");
	static_assert(meta::is_sequence_v<meta_data_mems>, "");

	cout << meta::get_size_v<meta_data_mems> << endl;

	// 0-th (public) data member
	typedef meta::get_element_t<meta_data_mems, 0> meta_data_mem0;

	static_assert(is_metaobject_v<meta_data_mem0>, "");
	static_assert(meta::is_variable_v<meta_data_mem0>, "");
	static_assert(meta::has_type_v<meta_data_mem0>, "");

	cout << meta::get_name_v<meta_data_mem0> << endl;

	// 2-nd (public) data member
	typedef meta::get_element_t<meta_data_mems, 2> meta_data_mem2;

	static_assert(is_metaobject_v<meta_data_mem2>, "");
	static_assert(meta::is_variable_v<meta_data_mem2>, "");
	static_assert(meta::has_type_v<meta_data_mem2>, "");

	cout << meta::get_name_v<meta_data_mem2> << endl;

	// all data members
	typedef meta::get_all_data_members_t<meta_foo> meta_all_data_mems;

	static_assert(is_metaobject_v<meta_all_data_mems>, "");
	static_assert(meta::is_sequence_v<meta_all_data_mems>, "");

	cout << meta::get_size_v<meta_all_data_mems> << endl;

	// 0-th (overall) data member
	typedef meta::get_element_t<meta_all_data_mems, 0> meta_all_data_mem0;

	static_assert(is_metaobject_v<meta_all_data_mem0>, "");
	static_assert(meta::is_variable_v<meta_all_data_mem0>, "");
	static_assert(meta::has_type_v<meta_all_data_mem0>, "");

	cout << meta::get_name_v<meta_all_data_mem0> << endl;

	// 3-rd (overall) data member
	typedef meta::get_element_t<meta_all_data_mems, 3> meta_all_data_mem3;

	static_assert(is_metaobject_v<meta_all_data_mem3>, "");
	static_assert(meta::is_variable_v<meta_all_data_mem3>, "");
	static_assert(meta::has_type_v<meta_all_data_mem3>, "");

	cout << meta::get_name_v<meta_all_data_mem3> << endl;

	return 0;
}

\end{minted}

This produces the following output:

\begin{verbatim}
4
b
y
7
_i
x
\end{verbatim}

\subsection{Class data members (2)}

\begin{minted}[tabsize=4]{cpp}
#include <reflexpr>
#include <iostream>

struct foo
{
private:
	int _i, _j;
public:
	static constexpr const bool b = true;
	float x, y, z;
private:
	static double d;
};

template <typename ... T>
void eat(T ... ) { }

template <typename Metaobjects, std::size_t I>
int do_print_data_member(void)
{
	using namespace std;

	typedef meta::get_element_t<Metaobjects, I> metaobj;

	cout	<< I << ": "
		<< (meta::is_public_v<metaobj>?"public":"non-public")
		<< " "
		<< (meta::is_static_v<metaobj>?"static":"")
		<< " "
		<< meta::get_name_v<meta::get_type_t<metaobj>>
		<< " "
		<< meta::get_name_v<metaobj>
		<< endl;

	return 0;
}

template <typename Metaobjects, std::size_t ... I>
void do_print_data_members(std::index_sequence<I...>)
{
	eat(do_print_data_member<Metaobjects, I>()...);
}

template <typename Metaobjects>
void do_print_data_members(void)
{
	using namespace std;

	do_print_data_members<Metaobjects>(
		make_index_sequence<
			meta::get_size_v<Metaobjects>
		>()
	);
}

template <typename MetaClass>
void print_data_members(void)
{
	using namespace std;

	cout<< "Public data members of " << meta::get_name_v<MetaClass> << endl;

	do_print_data_members<meta::get_data_members_t<MetaClass>>();
}

template <typename MetaClass>
void print_all_data_members(void)
{
	using namespace std;

	cout << "All data members of " << meta::get_name_v<MetaClass> << endl;

	do_print_data_members<meta::get_all_data_members_t<MetaClass>>();
}

int main(void)
{
	print_data_members<reflexpr(foo)>();
	print_all_data_members<reflexpr(foo)>();

	return 0;
}
\end{minted}

This program produces the following output:

\begin{verbatim}
Public data members of foo
0: public static bool b
1: public  float x
2: public  float y
3: public  float z
All data members of foo
0: non-public  int _i
1: non-public  int _j
2: public static bool b
3: public  float x
4: public  float y
5: public  float z
6: non-public static double d
\end{verbatim}


\subsection{Class data members (3)}

\begin{minted}[tabsize=4]{cpp}
#include <reflexpr>
#include <iostream>

struct A
{
	int a;
};

class B : public A
{
private:
	bool b;
};

class C : public B
{
public:
	char c;
};

int main(void)
{
	using namespace std;

	typedef reflexpr(A) meta_A;
	typedef reflexpr(B) meta_B;
	typedef reflexpr(C) meta_C;

	cout << meta::get_size_v<meta::get_data_members_t<meta_A>> << endl;
	cout << meta::get_size_v<meta::get_data_members_t<meta_B>> << endl;
	cout << meta::get_size_v<meta::get_data_members_t<meta_C>> << endl;

	cout << meta::get_size_v<meta::get_all_data_members_t<meta_A>> << endl;
	cout << meta::get_size_v<meta::get_all_data_members_t<meta_B>> << endl;
	cout << meta::get_size_v<meta::get_all_data_members_t<meta_C>> << endl;

	return 0;
}
\end{minted}

This program produces the following output:

\begin{verbatim}
1
0
1
1
1
1
\end{verbatim}
