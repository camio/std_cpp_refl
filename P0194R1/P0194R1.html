<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8"/>
	<style>
body {
	color: black;
	background-color: white; 
	font-family: "Book Antiqua", "Times New Roman", "Times", serif;
	padding: 2em;
}

table.header th {
	text-align: right;
	padding-right: 1em;
	vertical-align: top;
}

table.references th {
	text-align: right;
	padding-right: 1em;
}

table.references td {
	font-style: oblique;
}

table.references td a {
	color: black;
	text-decoration: none;
}

table.references td a:hover {
	color: black;
	text-decoration: underline;
}

blockquote.std {
	color: black;
	background-color: #F1F1F1;
	border: 1px solid #D1D1D1;
	padding-left: 0.5em;
	padding-right: 0.5em;
}

span.section_name {
	float: right;
	font-weight: bold;
}
pre code {
	font-family: "Hack", "OCR A Extended", "Consolas", "Lucida Console", monospace;
	line-height: 1.1em;
	font-size: small;
	-moz-tab-size: 2;
	-o-tab-size: 16;
	tab-size: 2;
}

pre {
	background-color: #F0F0F0;
}

object.htmlc {
	width: 100%;
	height: auto;
}
</style>
	<title>P0194R1 -- Static reflection</title>
</head>
<body>

<table class="header">
	<tr><th>Document Number:</th><td><b>P0194R1</b>, ISO/IEC JTC1 SC22 WG21</td></tr>
  <tr><th>Date:</th><td>2016-05-17</td></tr>
  <tr><th>Project:</th><td>Programming Language C++</td></tr>
  <tr><th>Audience:</th><td>Reflection(SG7) / EWG</td></tr>
  <tr>
		<th rowspan="2">Authors:</th>
		<td>Matúš Chochlík (<a href="mailto:chochlik@gmail.com">chochlik@gmail.com</a>)</td>
	</tr>
  <tr>
		<td>Axel Naumann (axel.naumann@cern.ch)</td>
	</tr>
</table>

<h1>Static reflection</h1>


<h2>Table of Contents</h2>
<div id="TOC">
	<ul>
		<li><a href="#introduction">Introduction</a>
		</li>
		<li><a href="#revisions">Revision history</a>
		</li>
		<li><a href="#wording">Proposed wording</a>
		</li>
		<li><a href="#acks">Acknowledgments</a>
		</li>
	</ul>
</div>

<h2 id="introduction">Introduction</h2>

<p>TODO
</p>

<h2 id="revisions">Revision history</h2>

<p>TODO
</p>

<h2 id="wording">Proposed wording</h2>

<blockquote class="std">
	<h3>? Compile-time reflection <span class="section_name">[refl]</span></h3>

	<h4>?.1 General description <span class="section_name">[refl.general]</span></h4>

	<p>Compile-time constant metadata describing various aspects of program declarations
	are provided indirectly by the means of anonymous types generated by the compiler --
	<em>metaobjects</em>.
	The <em>metaobject</em> types themselves are opaque, without any internal
	structure and they cannot be instantiated.
	</p>
	
	<p>The actual metadata can be obtained by instantiating templates constituting
	the <em>interface</em> of the metaobjects. Each template serves a particular
	purpose and provides a single piece of metadata.
	</p>

	Metaobjects reflecting different kinds of declarations conform to different
	<em>metaobject concepts</em> and have different interfaces -- sets of templates
	applicable on the metaobjects. Another set of templates -- the <em>metaobject
	traits</em> can be used to determine which concepts a metaobject conforms to.

	<h4>?.2 Metaobject traits<span class="section_name">[refl.traits]</span></h4>

	<p>A <em>MetaobjectTrait</em> describes a property of a metaobject type,
	typically it indicates if a metaobject conforms to a particular
	<em>metaobject concept</em>.
	
	It shall be a class template that takes one template type argument.
	It shall be <code>DefaultConstructible</code>, <code>CopyConstructible</code>
	and publicly and unambiguously derived, directly or indirectly from
	<code>true_type</code> or <code>false_type</code>.
	</p>

	<h4>?.3 Header <code>&lt;experimental/reflexpr&gt;</code> synopsis<span class="section_name">[refl.synopsis]</span></h4>

	<pre><code>
namespace std {

template &lt;typename T&gt; struct is_metaobject;

namespace meta {

// <em>metaobject traits</em>
template &lt;typename T&gt; struct is_sequence;
template &lt;typename T&gt; struct has_name;
template &lt;typename T&gt; struct has_type;
template &lt;typename T&gt; struct has_scope;
template &lt;typename T&gt; struct is_scope;
template &lt;typename T&gt; struct is_alias;
template &lt;typename T&gt; struct is_class_member;
template &lt;typename T&gt; struct is_linkable;
template &lt;typename T&gt; struct is_global_scope;
template &lt;typename T&gt; struct is_namespace;
template &lt;typename T&gt; struct is_type;
template &lt;typename T&gt; struct is_class;
template &lt;typename T&gt; struct is_enum;
template &lt;typename T&gt; struct is_variable;

// 
template &lt;typename T&gt;
  constexpr bool is_sequence_v = is_sequence::value;
template &lt;typename T&gt;
  constexpr bool has_name_v = has_name::value;
template &lt;typename T&gt;
  constexpr bool has_type_v = has_type::value;
template &lt;typename T&gt;
  constexpr bool has_scope_v = has_scope::value;
template &lt;typename T&gt;
  constexpr bool is_scope_v = is_scope::value;
template &lt;typename T&gt;
  constexpr bool is_alias_v = is_alias::value;
template &lt;typename T&gt;
  constexpr bool is_class_member_v = is_class_member::value;
template &lt;typename T&gt;
  constexpr bool is_linkable_v = is_linkable::value;
template &lt;typename T&gt;
  constexpr bool is_global_scope_v = is_global_scope::value;
template &lt;typename T&gt;
  constexpr bool is_namespace_v = is_namespace::value;
template &lt;typename T&gt;
  constexpr bool is_type_v = is_type::value;
template &lt;typename T&gt;
  constexpr bool is_class_v = is_class::value;
template &lt;typename T&gt;
  constexpr bool is_enum_v = is_enum::value;
template &lt;typename T&gt;
  constexpr bool is_variable_v = is_variable::value;


} namespace meta
} namespace std
</code></pre>

	<h4>?.4 The reflection operator<span class="section_name">[reflection.reflexpr]</span></h4>

	<p>TODO
	</p>
</blockquote>

<h2 id="acks">Acknowledgments</h2>

<p>TODO
</p>

<h2>References</h2>

<table class="references">
<tr id="ref-P0194R0">
	<th>[P0194R0]</th>
	<td>
	<a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0194r0.pdf">
		Chochlík M., Naumann A. -- P0194R0 - Static reflection (revision 4)
	</a>
  </td>
</tr>

<tr id="ref-N4451">
	<th>[N4451]</th>
	<td>
	<a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4451.pdf">
		Chochlík M. -- N4451 - Static reflection (revision 3)
  </a>
  </td>
</tr>

<tr id="ref-N4111">
	<th>[N4111]</th>
	<td>
	<a href="https://isocpp.org/files/papers/n4111.pdf">
		Chochlík M. -- N4111 - Static reflection (revision 2)
	</a>
  </td>
</tr>

<tr id="ref-N3996">
	<th>[N3996]</th>
	<td>
	<a href="https://isocpp.org/files/papers/n3996.pdf">
		Chochlík M. -- N3996 - Static reflection
	</a>
  </td>
</tr>
</table>

</body>
</html>
